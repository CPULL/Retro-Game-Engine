Name: Shadow of the Beast

Start {
//	wait(2)
	clr(c133)
	for(i=0,i<12,i++) {
		sp[i] = Label("PlayerSprite"+i)
		sprite(0, sp[i], 0)
	}

	box(0,128,320,180,c152, c152)
	write("Shadow of the Beast", 8,1,c301)
	spos(0, 150-16, 120)
	spen(0,1)
	t=0
	xgu=0
	xgd=0
	xm=0
	Tilemap(1, 1, Mountains:)
	TilePos(1, 0, 84)
	Tilemap(2, 2, GrassUp:)
	TilePos(2, 0, 132)
	Tilemap(3, 3, GrassDown:)
	TilePos(3, 0, 156)
	
	gsize = 40*64-320
	msize = 45*64-320
	ym=84
	yg=132
	
	for(i=0,i<320,i+=8) {
		image(background:+2, i, 68, 8, 64)
	}
	image(moon:+2, 220, 8, 48, 48)
}

dupdate {
	if (keyr) xm-=1
	if (keyl) xm+=1
	if (keyud) ym-=1
	if (keydd) ym+=1
	if (xm< -(45*64-320)) xm += 45*64-320
	if (xm>0) xm -= 45*64-320
	TilePos(1, xm, ym)
	TilePos(2, xm, yg)
	write(" " +ym+ "  ", 0,0, c550,c005)
}

update {
	movement = 0
	dir = 0
	if (keyl) {
		movement = 1
		dir = -1
		srot(0,0,-1)
		spos(0, 150+16, 120)
	}
	
	if (keyr) {
		movement = 1
		dir = 1
		srot(0,0,0)
		spos(0, 150-16, 120)
	}
	
	if (!movement) {
		sprite(0, sp[6], 0)
	}
	else {
		t+=2 * deltatime
		i = 12 * t
		if (t>1) t-=1
		sprite(0, sp[i % 12], 0)
		xgu-=dir * 170 * deltaTime
		xgd-=dir * 200 * deltaTime
		xm-=dir * 120 * deltaTime
	}
	
	// GrassUp
	TilePos(2, xgu, 132)
	if (xgu < -gsize) xgu+=gsize
	if (xgu > 0) xgu-=gsize

	// GrassDown
	TilePos(3, xgd, 156)
	if (xgd < -gsize) xgd+=gsize
	if (xgd > 0) xgd-=gsize

	// Mountains
	TilePos(1, xm, 84)
	if (xm < -msize) xm+=msize
	if (xm > 0) xm-=msize
}

// Mountains 40x1 64x48
// Grass 40x2 64x24

Config {
	screen(320,180)
	ram(1k)
}
Data {
cpu:
usehex
20 20
FFFFFFFF FF000000 00242400 002B2B2B 002B002B 24000000 002400F9 FFFFFFFF FFFFFFFF 2B2B0000 00002400 2B552B56 00002B00 00000000 00002400 00FFFFFF FFFFFF00 2B562B01 00000081 0700562B 2B002B2B 2B2B0000 4E240048 0000FFFF FFFF2400 00502B00 2B000001 2B002B2C 2B002B2B 2B2B2B00 00002400 240000FF FF002400 00002B2B 2B00002B 2B012B2B 2B002B00 2B2B2B2B 00000000 002424F9 FD004800 0000002B 0000562B 562B0007 00002B00 2B2B2B00 2B002400 00002424 24242424 00000000 2B2B812B 5601002B 2B2B5600 2B2B2B00 2B000000 00002400 4E002424 00000000 0056812B 2C2B2B01 002B2B2B 2B252B2B 2B000024 00000024 24242478 2400002B 2B2B2B2B 002B012B 2B2B002B 2B2B2B2B 56000000 004E2400 24244848 00000000 2B2B2B2B 2B2B2B56 2B2B0000 2B2B002B 2B000000 24000000 244E484E 0000002B 012B2B00 00002B2B 2B002B2B 2B007A2B 0000002B 4E480000 48484848 00000000 0056564F 562B2B00 00070000 002B2B2B 4F4F002B 244E2400 24484848 242B5656 81818156 81565650 2B2A4F4F 4F4F4F4F 4F4F4F4F 24247800 4848484E 48482424 242B242B 55805733 5757577A 4F4F2B4F 4F4F2B4F 00242448 48484848 502C0833 3381557A 2C0F3357 57575733 574F4F4F 4F4F4F24 4F242400 48484873 502C3233 3357244F 2C333333 33333357 56554F2B 2B4F4F24 24242400 244E487A 50325633 33332B4F 4F2C3333 33333333 564F4F24 2B4F2424 4F49004E 244E4872 50335733 33792B4F 4F4F2C33 33333333 332B4F24 4F244F24 4F240000 2448486C 56335733 56244F4F 4F252B56 33333357 564F2424 4F244F24 4F240000 4E484872 4E245756 24242B4F 4F4F244F 504F4F4F 4F4F2A24 2B4F4F2B 24240000 48487272 72247248 2424002B 2B494F24 4F564F4F 502B2400 244F2B48 24244800 48487272 7224726C 24240000 24002424 244F4F4F 2B2B2400 244F4F72 24242424 48486C72 72007272 24000000 00242424 242B242B 24240000 004F4F72 24004824 6C487272 78726C72 48000000 00000000 244F2B24 2B240000 004F4F4E 242A2424 6C487272 72726C72 72000024 24242B4F 4F4F2B2B 24240000 244F2B4E 24002424 FE6C7272 72724872 72242424 24242B4F 4F2B2B2B 00000000 244F4F00 00002478 FF727278 72487278 72482400 00244F4F 4F2B2424 24000024 2B4F2B00 004E0024 FFFF7279 48727272 6C782400 2424242B 2B242424 00002424 4F4F2B00 002400FF FFFFFF72 48724872 72780000 00242424 24242400 00002B4F 4F4F2B24 002AFFFF FFFFFFFF 72784872 72784E00 00002424 24000000 24242B4F 4F4F2B24 24FFFFFF FFFFFFFF FF4E2472 72787800 00242400 00000024 242B2B4F 4F4F2424 FFFFFFFF FFFFFFFF FFFFFE72 72000024 00240000 0024242A 2B2B2B4F 4F24FCFF FFFFFFFF 
}


